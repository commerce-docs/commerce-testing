{"version":3,"file":"component---src-pages-guide-integration-attributes-data-fixture-md-8af77f831b78154fd1d0.js","mappings":"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","sources":["webpack://commerce-testing/./src/pages/guide/integration/attributes/data-fixture.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-testing/commerce-testing/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"data-fixture-attribute\"\n    }}>{`Data fixture attribute`}</h1>\n    <p>{`Data fixture attributes apply fixtures that implement `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\DataFixtureInterface`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\RevertibleDataFixtureInterface`}</inlineCode>{`.`}</p>\n    <p>{`It takes two more optional parameters alongside the fixture class name. The second parameter is the data that is used to customize the fixture and the third parameter is the alias (ID) of the fixture that is used to retrieve the data returned by the fixture and also as a reference in other fixture parameters.`}</p>\n    <p>{`Use data fixtures to prepare a database for tests. The Integration Testing Framework (ITF) reverts the database to its initial state automatically.\nTo set up a date fixture, use the `}<inlineCode parentName=\"p\">{`DataFixture`}</inlineCode>{` attribute.`}</p>\n    <h2 {...{\n      \"id\": \"format\"\n    }}>{`Format`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`#[\n    DataFixture(string $type, array $data = [], ?string $as = null, ?string $scope = null, int $count = 1)\n]\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"parameters\"\n    }}>{`Parameters`}</h3>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`type`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Name of a class that implements `}<inlineCode parentName=\"li\">{`Magento\\\\TestFramework\\\\Fixture\\\\DataFixtureInterface`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`Magento\\\\TestFramework\\\\Fixture\\\\RevertibleDataFixtureInterface`}</inlineCode>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`data`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The optional array of data passed on to the fixture.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`count`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The optional number of entities of the same kind and configuration that this fixture should generate.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`scope`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The optional store view, site, or store group fixture alias from the scope of which the fixture will generate the entity.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`as`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The fixture alias that will be used as a reference to retrieve the data returned by the fixture and also as a reference in other fixtures parameters.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"fixture-usage\"\n    }}>{`Fixture Usage`}</h2>\n    <h3 {...{\n      \"id\": \"retrieve-fixture-data-in-the-test\"\n    }}>{`Retrieve fixture data in the test`}</h3>\n    <p>{`A test can retrieve data that was returned by a Data Fixture using `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\DataFixtureStorageManager`}</inlineCode>{` and the fixture alias.`}</p>\n    <p>{`The following example shows how to retrieve data that was returned by the fixtures:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class ProductsList extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n    #[\n        DataFixture(ProductFixture::class, as: 'product1'),\n        DataFixture(ProductFixture::class, as: 'product2'),\n        DataFixture(ProductFixture::class, as: 'product3')\n    ]\n    public function testGetProductsCount(): void\n    {\n        $fixtures = DataFixtureStorageManager::getStorage();\n        $product1 = $fixtures->get('product1');\n        $product2 = $fixtures->get('product2');\n        $product3 = $fixtures->get('product3');\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"supply-data-to-data-fixture-as-a-variable\"\n    }}>{`Supply data to data fixture as a variable`}</h3>\n    <p>{`It is possible to supply data as a variable from one fixture to another using the fixture alias in one of the following formats:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`$fixtureAlias$`}</inlineCode>{` is a reference to the data that was returned by the fixture with alias `}<inlineCode parentName=\"li\">{`fixtureAlias`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`$fixtureAlias.snake_case_property_name$`}</inlineCode>{` is a reference to the property `}<inlineCode parentName=\"li\">{`snake_case_property_name`}</inlineCode>{` in the data that was returned by the fixture with alias `}<inlineCode parentName=\"li\">{`fixtureAlias`}</inlineCode>{`.`}</li>\n    </ul>\n    <p>{`The following example shows how a fixture can use the data of another fixture:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class QuoteTest extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n    #[\n        DataFixture(GuestCartFixture::class, as: 'cart'),\n        DataFixture(SetBillingAddressFixture::class, ['cart_id' => '$cart.id$']),\n    ]\n    public function testCollectTotals(): void\n    {\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"specifying-the-number-of-instances-of-data-fixture-to-generate\"\n    }}>{`Specifying the number of instances of data fixture to generate`}</h3>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Sometimes, we need to generate several instances of a data fixture with exactly the same configuration.\nFor such cases, we can use the `}<inlineCode parentName=\"p\">{`count`}</inlineCode>{` parameter and set its value to the desired number of instances.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class ProductsList extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n   #[\n      DataFixture(CategoryFixture::class, ['is_anchor' => 0], 'category1'),\n      DataFixture(CategoryFixture::class, ['parent_id' => '$category1.id$'], 'category2'),\n      DataFixture(ProductFixture::class, ['category_ids' => ['$category1.id$']])\n      DataFixture(ProductFixture::class, ['category_ids' => ['$category2.id$']], count: 2)\n   ]\n   public function testAddCategoryFilter(): void\n   {\n      $fixtures = DataFixtureStorageManager::getStorage();\n      $category1 = $fixtures->get('category1');\n      $category2 = $fixtures->get('category2');\n      $collection = $this->collectionFactory->addCategoryFilter($category2);\n      $this->assertEquals(2, $collection->getSize());\n      $collection = $this->collectionFactory->addCategoryFilter($category1);\n      $this->assertEquals(1, $collection->getSize());\n   }\n}\n`}</code></pre>\n    <p>{`Or in case where we need to specify an alias:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class ProductsList extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n   #[\n      DataFixture(ProductFixture::class, as: 'product', count: 3)\n   ]\n   public function testGetProductsCount(): void\n   {\n      $fixtures = DataFixtureStorageManager::getStorage();\n      $product1 = $fixtures->get('product1');\n      $product2 = $fixtures->get('product2');\n      $product3 = $fixtures->get('product3');\n   }\n}\n`}</code></pre>\n    <p>{`The generated fixtures will be assigned aliases product1, product2, and product3 (respectively).`}</p>\n    <h3 {...{\n      \"id\": \"specifying-the-store-scope-for-the-data-fixture\"\n    }}>{`Specifying the store scope for the data fixture`}</h3>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`If you need to instruct the system to execute a data fixture in the scope of a specific store view, you can set the `}<inlineCode parentName=\"p\">{`scope`}</inlineCode>{` parameter value to the valid store view, site, or store group identifier.`}</p>\n    <p>{`In the following example, we create a new store with the `}<inlineCode parentName=\"p\">{`store2`}</inlineCode>{` identifier and a product. Then, we create a guest cart under the `}<inlineCode parentName=\"p\">{`store2`}</inlineCode>{` scope and add a created product to it.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class QuoteTest extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n    #[\n        DataFixture(StoreFixture::class, as: 'store2'),\n        DataFixture(ProductFixture::class, as: 'p'),\n        DataFixture(GuestCartFixture::class, as: 'cart', scope: 'store2'),\n        DataFixture(AddProductToCartFixture::class, ['cart_id' => '$cart.id$', 'product_id' => '$p.id$', 'qty' => 2]),\n    ]\n    public function testCollectTotals(): void\n    {\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"test-class-and-test-method-scopes\"\n    }}>{`Test class and test method scopes`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`DataFixture`}</inlineCode>{` can be specified for a particular test case (method) or for an entire test class.\nThe basic rules for fixture attributes at different levels are:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`DataFixture`}</inlineCode>{` at a test class level makes the framework apply the declared fixtures to each test in the test class.\nWhen the final test is complete, all class-level fixtures are reverted.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`DataFixture`}</inlineCode>{` for a particular test method signals the framework to revert the fixtures declared on a test class level and applies the fixtures declared at a test method level instead.\nWhen the test is complete, the ITF reverts the applied fixtures. Test class level data fixtures are ignored if they are present at the test method level.`}</li>\n    </ul>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The integration testing framework interacts with a database to revert the applied fixtures.`}</p>\n    <h2 {...{\n      \"id\": \"creating-the-fixture\"\n    }}>{`Creating the fixture`}</h2>\n    <p>{`Data Fixture is a PHP class that implements `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\DataFixtureInterface`}</inlineCode>{` or  `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\RevertibleDataFixtureInterface`}</inlineCode>{`. Its main purpose is to seed the database with the data needed to run a test.`}</p>\n    <h3 {...{\n      \"id\": \"principles\"\n    }}>{`Principles`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Data Fixture class MUST implement `}<inlineCode parentName=\"li\">{`Magento\\\\TestFramework\\\\Fixture\\\\DataFixtureInterface`}</inlineCode>{` or  `}<inlineCode parentName=\"li\">{`Magento\\\\TestFramework\\\\Fixture\\\\RevertibleDataFixtureInterface`}</inlineCode>{` if the data created by the fixture is revertible. For instance, a fixture that creates an entity (for example, product).`}</li>\n      <li parentName=\"ol\">{`Data Fixture class MUST be placed in the `}<inlineCode parentName=\"li\">{`<ModuleName>/Test/Fixture`}</inlineCode>{` folder of the corresponding module with namespace: `}<inlineCode parentName=\"li\">{`<VendorName>\\\\<ModuleName>\\\\Test\\\\Fixture`}</inlineCode>{` (for example, `}<inlineCode parentName=\"li\">{`Magento\\\\Catalog\\\\Test\\\\Fixture`}</inlineCode>{`).`}</li>\n      <li parentName=\"ol\">{`Data Fixture class SHOULD follow single responsibility principle.`}</li>\n      <li parentName=\"ol\">{`Data Fixture class MUST depend only on services from modules that are declared in the `}<inlineCode parentName=\"li\">{`require`}</inlineCode>{` section of its module's composer.json file.`}</li>\n      <li parentName=\"ol\">{`Data Fixture MUST NOT depend on another fixture.`}</li>\n      <li parentName=\"ol\">{`Data Fixture SHOULD be implemented using service APIs.`}</li>\n      <li parentName=\"ol\">{`Data Fixture SHOULD have dynamic default data to allow generating unique fixtures.`}</li>\n      <li parentName=\"ol\">{`Data Fixture MUST NOT handle input validation. Such validation should be handled by the service API.`}</li>\n    </ol>\n    <h3 {...{\n      \"id\": \"dynamic-default-data\"\n    }}>{`Dynamic default data`}</h3>\n    <p>{`In order to generate multiple fixtures of the same type without having to manually configure unique fields, you can use the placeholder `}<inlineCode parentName=\"p\">{`%uniqid%`}</inlineCode>{` in the default value of unique fields and `}<inlineCode parentName=\"p\">{`Magento\\\\TestFramework\\\\Fixture\\\\Data\\\\ProcessorInterface`}</inlineCode>{` to substitute the placeholder with a unique sequence.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Catalog/Test/Fixture/Product.php\"\n      }}><inlineCode parentName=\"a\">{`Magento\\\\Catalog\\\\Test\\\\Fixture\\\\Product`}</inlineCode></a>{` demonstrates the usage of `}<inlineCode parentName=\"p\">{`%uniqid%`}</inlineCode>{` (`}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{`: `}<inlineCode parentName=\"p\">{`simple-product%uniqid%`}</inlineCode>{`) in the fixture default data.`}</p>\n    <p>{`In the following example, a unique `}<inlineCode parentName=\"p\">{`sku`}</inlineCode>{` is automatically generated for the first fixture (for example, `}<inlineCode parentName=\"p\">{`simple-product61c10b2e86f991`}</inlineCode>{`) and the second fixture (for example, `}<inlineCode parentName=\"p\">{`simple-product61c10b2e86f992`}</inlineCode>{`). The sequence is random and therefore unpredictable.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class ProductsListTest extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n     #[\n        DataFixture(ProductFixture::class),\n        DataFixture(ProductFixture::class)\n     ]\n    public function testGetProductsCount(): void\n    {\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"decoupling-fixtures\"\n    }}>{`Decoupling fixtures`}</h3>\n    <p>{`Fixtures must be written in the way that they only use one API to generate data. For example, the fixture that creates\na product should only invoke the \"Create Product\" API and return the product created. This fixture should not add any extra\nlogic beyond the \"create product\" API capabilities, such logic should be implemented in a separate fixture.`}</p>\n    <h3 {...{\n      \"id\": \"examples\"\n    }}>{`Examples`}</h3>\n    <p>{`Example 1:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class QuoteTest extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n\n    #[\n        DataFixture(ProductFixture::class, as: 'p'),\n        DataFixture(GuestCartFixture::class, as: 'cart'),\n        DataFixture(AddProductToCartFixture::class, ['cart_id' => '$cart.id$', 'product_id' => '$p.id$', 'qty' => 2]),\n        DataFixture(SetBillingAddressFixture::class, ['cart_id' => '$cart.id$']),\n        DataFixture(SetShippingAddressFixture::class, ['cart_id' => '$cart.id$']),\n    ]\n    public function testCollectTotals(): void\n    {\n    }\n}\n`}</code></pre>\n    <p>{`Example 2:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php?start_inline=1\"\n      }}>{`class PriceTest extends \\\\PHPUnit\\\\Framework\\\\TestCase\n{\n    #[\n        DataFixture(ProductFixture::class, ['sku' => 'simple1', 'price' => 10], 'p1'),\n        DataFixture(ProductFixture::class, ['sku' => 'simple2', 'price' => 20], 'p2'),\n        DataFixture(ProductFixture::class, ['sku' => 'simple3', 'price' => 30], 'p3'),\n        DataFixture(BundleSelectionFixture::class, ['sku' => '$p1.sku$', 'price' => 10, 'price_type' => 0], 'link1'),\n        DataFixture(BundleSelectionFixture::class, ['sku' => '$p2.sku$', 'price' => 25, 'price_type' => 1], 'link2'),\n        DataFixture(BundleSelectionFixture::class, ['sku' => '$p3.sku$', 'price' => 25, 'price_type' => 0], 'link3'),\n        DataFixture(BundleOptionFixture::class, ['product_links' => ['$link1$', '$link2$', '$link3$']], 'opt1'),\n        DataFixture(\n            BundleProductFixture::class,\n            ['sku' => 'bundle1','price' => 50,'price_type' => 1,'_options' => ['$opt1$']],\n            'bundle1'\n        ),\n    ]\n    public function testBundleWithFixedPrice(): void\n    {\n\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"fixture-rollback\"\n    }}>{`Fixture rollback`}</h3>\n    <p>{`A fixture that contains database transactions only are reverted automatically.\nOtherwise, when a fixture creates files or performs any actions other than a database transaction, provide the corresponding rollback logic, in the `}<inlineCode parentName=\"p\">{`revert`}</inlineCode>{` method of the revertible data fixture. Rollbacks are run after reverting all the fixtures related to database transactions.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`See the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Catalog/Test/Fixture/Product.php\"\n      }}><inlineCode parentName=\"a\">{`Magento\\\\Catalog\\\\Test\\\\Fixture\\\\Product`}</inlineCode></a>{` fixture for an example.`}</p>\n    <h3 {...{\n      \"id\": \"restrictions\"\n    }}>{`Restrictions`}</h3>\n    <p>{`Do not rely on and do not modify an application state from within a fixture. The `}<a parentName=\"p\" {...{\n        \"href\": \"../annotations/magento-app-isolation.md\"\n      }}>{`application isolation attribute`}</a>{` can reset the application state at any time.`}</p>\n    {\n      /* Link definitions */\n    }\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}