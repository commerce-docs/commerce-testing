"use strict";(self.webpackChunkcommerce_testing=self.webpackChunkcommerce_testing||[]).push([[3835],{34269:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return c}});var o=n(58168),a=n(80045),r=(n(88763),n(15680)),i=n(83407);const s=["components"],m={},p=(d="InlineAlert",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)});var d;const l={_frontmatter:m},u=i.A;function c(e){let{components:t}=e,n=(0,a.A)(e,s);return(0,r.mdx)(u,(0,o.A)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"component-registration-attribute"},"Component registration attribute"),(0,r.mdx)("p",null,"When your test design requires you to register fixture components and unregister them after the test execution, use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir")," attribute. It enables you to register all the components at a specified directory recursively."),(0,r.mdx)("h2",{id:"format"},"Format"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"#[\n   ComponentsDir(string $path)\n]\n")),(0,r.mdx)("h3",{id:"parameters"},"Parameters"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"path"),(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},"A path to the directory with fixture components. Each component must be registered using ",(0,r.mdx)("inlineCode",{parentName:"li"},"registration.php")," file.")))),(0,r.mdx)("h2",{id:"test-class-attribute"},"Test class attribute"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir")," attribute for a test case is applied to all test methods in the test case."),(0,r.mdx)("h2",{id:"test-method-attribute"},"Test method attribute"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir")," attribute for a test method configures the test to run with registered components located in a specified directory. If the parent test case also declares a ",(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir"),", both attributes are merged."),(0,r.mdx)("h2",{id:"example"},"Example"),(0,r.mdx)("p",null,"The following example demonstrates the ",(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir")," attribute in different scopes."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"namespace Magento\\Foo;\n\n#[\n   ComponentsDir('Magento/Foo/_files/code/Magento')\n]\nclass BarTest extends \\PHPUnit\\Framework\\TestCase\n{\n    #[\n        ComponentsDir('Magento/Foo/_files/themes')\n    ]\n    public function testOne()\n    {\n       ...   // Here you can use registered components from 'Magento/Foo/_files/code/Magento' and 'Magento/Foo/_files/themes'\n    }\n\n    #[\n        ComponentsDir('Magento/Foo/_files/libs', 'Magento/Baz/_files/languages')\n    ]\n    public function testTwo()\n    {\n       ...   // Here you can use the registered components from 'Magento/Foo/_files/code/Magento', 'Magento/Foo/_files/libs', and 'Magento/Baz/_files/languages'\n    }\n}\n")),(0,r.mdx)("p",null,"Each path declared in an attribute must contain a registration file in the specified directory or its subdirectories. For example, the ",(0,r.mdx)("inlineCode",{parentName:"p"},"MagentoFooTest_MyModule")," component at ",(0,r.mdx)("inlineCode",{parentName:"p"},"ComponentsDir('Magento/Foo/_files/code/Magento')")," can be registered in ",(0,r.mdx)("inlineCode",{parentName:"p"},"Magento/Foo/_files/code/Magento/MyModule/registration.php"),":"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-php?start_inline=1"},"\nuse Magento\\Framework\\Component\\ComponentRegistrar;\n\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n    \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n    'MagentoFooTest_MyModule',\n    __DIR__\n);\n")),(0,r.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"A theme must be registered in the database.\nEach time you register a theme, reset the entire application.\nUse the ",(0,r.mdx)("a",{parentName:"p",href:"../annotations/magento-db-isolation.md"},(0,r.mdx)("inlineCode",{parentName:"a"},"DbIsolation"))," attribute to keep the database integrity safe."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-integration-attributes-components-dir-md-23ba1daac5c01fc2ca58.js.map